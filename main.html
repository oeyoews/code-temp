<!DOCTYPE html>
<html>

<head>
  <meta charset="UTF-8">
  <title>Generate BlurHash</title>
  <script src="https://unpkg.com/blurhash/dist/blurhash.min.js"></script>
</head>

<body>
  <img id="source-image" crossorigin=""
    src="https://plus.unsplash.com/premium_photo-1690481529194-6087914e096e?auto=format&fit=crop&q=60&w=600&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxlZGl0b3JpYWwtZmVlZHwyfHx8ZW58MHx8fHx8"
    alt="Original Image">

  <script>
        // 获取图像元素
        const image = document.getElementById('source-image');

        // 创建一个新的Canvas元素
        const canvas = document.createElement('canvas');
        const ctx = canvas.getContext('2d');

        // 将图像绘制到Canvas上
        canvas.width = image.width;
        canvas.height = image.height;
        ctx.drawImage(image, 0, 0);

        // 获取绘制后的图像数据
        const imageData = ctx.getImageData(0, 0, canvas.width, canvas.height);
        const pixels = new Uint8Array(imageData.data.buffer);

        // 生成BlurHash
        const blurhash = blurhash.encode(pixels, canvas.width, canvas.height, 4, 4);

        console.log(blurhash);
      </script>
</body>

</html>